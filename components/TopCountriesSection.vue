<template>
  <div class="top-countries-section">
    <div class="head">
      <img :src="telescope_emoji" :alt="telescope_emoji" />

      <div class="h7">
        ‡∏û‡∏≤‡πÑ‡∏õ‡∏™‡πà‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á e-service ‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏î‡∏π
      </div>
    </div>

    <div class="select-country">
      <button
        v-for="(country, index) in country_options"
        :key="index"
        :class="{ 'is-active': current_country === country.th_country_name }"
        @click="current_country = country.th_country_name"
      >
        <img :src="country.flag_image" :alt="country.flag_image" />

        <h3>{{ country.th_country_name }}</h3>

        <div class="b2">
          EGDI ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà <b>{{ country["E-Government Rank"] }}</b>
        </div>

        <div class="b2">
          EPI ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà <b>{{ country["E-Participation Rank"] }}</b>
        </div>
      </button>
    </div>

    <div class="step-wrap">
      <div v-if="current_country === '‡πÄ‡∏≠‡∏™‡πÇ‡∏ï‡πÄ‡∏ô‡∏µ‡∏¢'" class="estonia-step h7">
        ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏≠‡∏™‡πÇ‡∏ï‡πÄ‡∏ô‡∏µ‡∏¢
        ‡∏à‡∏∞‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ê‡∏≠‡∏≠‡∏Å‡πÉ‡∏´‡πâ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö
        <a
          href="https://e-estonia.com/solutions/e-identity/id-card/"
          target="_blank"
          rel="noopener noreferrer"
          ><b>e-Identity</b></a
        >
        ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏ó‡∏≥‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏ä‡πà‡∏ô ‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ ‡πÇ‡∏´‡∏ß‡∏ï‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡πÄ‡∏ã‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤
        ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô Smart-ID
        ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Å‡πá‡πÅ‡∏Ñ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° ‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô
        ‡∏ä‡∏≤‡∏ß‡πÄ‡∏≠‡∏™‡πÇ‡∏ï‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô‡∏à‡∏∂‡∏á‡πÅ‡∏ó‡∏ö‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡πâ‡∏≤‡∏ß‡πÄ‡∏ó‡πâ‡∏≤‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏¢!! <br /><br />
        ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ e-service ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Å‡πá‡∏°‡∏µ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå
        <a
          href="https://www.eesti.ee/en"
          target="_blank"
          rel="noopener noreferrer"
          >https://www.eesti.ee/en</a
        >
        ‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß üòç
      </div>

      <StepReview
        v-else
        :legends="legends"
        :data="current_country_data"
        :image_path="
          current_country === '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©'
            ? 'top_countries/review_uk'
            : 'top_countries/review_nz'
        "
        icon_path="top_countries/icon"
      />
    </div>

    <div class="jealous-wrap">
      <img :src="wow_emoji" :alt="wow_emoji" />

      <h5>‡∏≠‡∏¥‡∏à‡∏â‡∏≤‡∏°‡∏±‡πâ‡∏¢?</h5>

      <div class="b1">
        ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏≤
        ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏≠‡∏¥‡∏à‡∏â‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ó‡∏∏‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ñ‡∏π‡∏Å‡∏£‡∏ß‡∏°‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
        ‡∏ã‡∏∂‡πà‡∏á‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏á‡∏°‡∏´‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏•‡πâ‡∏ß
        ‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏Ñ‡∏∏‡πâ‡∏ô‡πÄ‡∏Ñ‡∏¢‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡πá‡∏ö
        ‡∏à‡∏ô‡∏û‡∏≠‡πÄ‡∏î‡∏≤‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô
        ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
        ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢
        ‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏ö‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß
        ‡∏Å‡πá‡∏à‡∏∞‡∏°‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏£‡∏¥‡∏á ‡πÄ‡∏ä‡πà‡∏ô
        ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å
        ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡πÑ‡∏ó‡∏¢‡∏ó‡∏µ‡πà‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
        ‡πÅ‡∏ñ‡∏°‡∏ö‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏¢‡∏±‡∏á‡∏•‡πâ‡∏≥ ‡∏ñ‡∏∂‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏∏‡∏ñ‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡∏ï‡∏ô ‡πÄ‡∏ã‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÑ‡∏î‡πâ
        ‡∏ã‡∏∂‡πà‡∏á‡∏™‡∏≠‡∏î‡∏£‡∏±‡∏ö‡∏Å‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
        ‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏£‡πà‡∏£‡∏∞‡∏ö‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÇ‡∏Ñ‡∏ß‡∏¥‡∏î - 19 ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏à‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏∏‡∏î‡πÜ
        <br /><br />
        ‡πÄ‡∏£‡∏≤‡∏´‡∏ß‡∏±‡∏á‡∏ß‡πà‡∏≤ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡πá‡∏ô‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡πÜ
        ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏£‡∏á‡∏ö‡∏±‡∏ô‡∏î‡∏≤‡∏•‡πÉ‡∏à‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ Gov e-Service
        ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡∏≠‡∏µ‡∏Å‡∏Å‡∏Å‡∏Å
      </div>
    </div>

    <div class="share-wrap">
      <div class="b2">‡πÅ‡∏ä‡∏£‡πå‡πÑ‡∏õ‡∏ö‡∏≠‡∏Å‡πÇ‡∏•‡∏Å ‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏ö‡πâ‡∏≤‡∏á!</div>

      <div class="social">
        <img
          data-sharer="facebook"
          :data-url="web_url"
          :src="facebook_icon"
          :alt="facebook_icon"
        />

        <img
          data-sharer="twitter"
          :data-url="web_url"
          :src="twitter_icon"
          :alt="twitter_icon"
        />

        <img
          data-sharer="line"
          :data-url="web_url"
          :src="line_icon"
          :alt="line_icon"
        />
      </div>
    </div>
  </div>
</template>

<script>
import _ from "lodash";
import review_nz_data from "~/static/data/review_nz.json";
import review_uk_data from "~/static/data/review_uk.json";

export default {
  props: {
    world_data: {
      type: Array,
      default: () => {
        return [];
      },
    },
  },
  data() {
    return {
      telescope_emoji: require("~/assets/images/emoji/telescope.png"),
      wow_emoji: require("~/assets/images/emoji/wow.png"),
      legends: [
        {
          name: "‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå",
          image: require("~/assets/images/emoji/website.png"),
        },
        {
          name: "‡πÑ‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏£‡∏¥‡∏á",
          image: require("~/assets/images/emoji/onsite.png"),
        },
        {
          name: "‡πÑ‡∏õ‡∏™‡πà‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå",
          image: require("~/assets/images/emoji/postbox.png"),
        },
      ],
      current_country: "‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©",
      facebook_icon: require("~/assets/images/facebook.svg"),
      twitter_icon: require("~/assets/images/twitter.svg"),
      line_icon: require("~/assets/images/line.svg"),
      web_url: "",
    };
  },
  computed: {
    country_options() {
      let countries = _.filter(this.world_data, (d) =>
        [
          "United Kingdom of Great Britain and Northern Ireland",
          "New Zealand",
          "Estonia",
        ].includes(d["Country Name"])
      );

      countries = _.map(countries, (c) => {
        let data = {};
        let flag_image = require("~/assets/images/emoji/flag-estonia.png");
        let th_country_name = "‡πÄ‡∏≠‡∏™‡πÇ‡∏ï‡πÄ‡∏ô‡∏µ‡∏¢";

        if (
          c["Country Name"] ===
          "United Kingdom of Great Britain and Northern Ireland"
        ) {
          data = review_uk_data;
          flag_image = require("~/assets/images/emoji/flag-uk.png");
          th_country_name = "‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©";
        }

        if (c["Country Name"] === "New Zealand") {
          data = review_nz_data;
          flag_image = require("~/assets/images/emoji/flag-new-zealand.png");
          th_country_name = "‡∏ô‡∏¥‡∏ß‡∏ã‡∏µ‡πÅ‡∏•‡∏ô‡∏î‡πå";
        }

        return { ...c, data, flag_image, th_country_name };
      });

      return [countries[1], countries[2], countries[0]];
    },
    current_country_data() {
      const res = _.find(
        this.country_options,
        (o) => o.th_country_name === this.current_country
      );
      return _.get(res, "data") || [];
    },
  },
  mounted() {
    this.web_url = window.location.href;
  },
};
</script>

<style lang="scss" scoped>
.top-countries-section {
  background: black;
  color: white;
  padding: 120px 0;
  .head {
    img {
      width: 80px;
    }
    .h7 {
      margin-top: 20px;
    }
  }
  .select-country {
    margin: 94px auto 0 auto;
    width: 95vw;
    display: flex;
    button {
      flex: 1;
      border-radius: 20px;
      border: none;
      margin: 0 8px;
      padding: 40px;
      opacity: 0.2;
      img {
        width: 60px;
      }
      h3 {
        margin-top: 10px;
      }
      .b2 {
        margin-top: 5px;
      }
    }
    button.is-active {
      opacity: 1;
    }
  }
  .step-wrap {
    padding-top: 100px;

    .estonia-step {
      max-width: 650px;
      margin: 0 auto;
      a {
        color: $color-green;
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }
    }
  }
  .jealous-wrap {
    max-width: 650px;
    margin: 200px auto 0 auto;
    img {
      width: 60px;
    }
    h5 {
      margin-top: 20px;
    }
    .b1 {
      margin-top: 20px;
    }
  }
  .share-wrap {
    margin-top: 72px;
    .b2 {
      color: $color-green;
    }
    .social {
      margin-top: 10px;
      img {
        margin: 0 5px;
        cursor: pointer;
      }
    }
  }
}
</style>
